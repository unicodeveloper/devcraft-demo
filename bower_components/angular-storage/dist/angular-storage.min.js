/*! angular-storage v0.5.0 | (c) 2014 Aspera, Inc. | MIT License */
!function(a){var b=a.angular;b.module("angular-storage",[]).service("aiStorage",["$rootScope","$window",function(a,c){var d,e,f,g,h,i,j,k;return g=null!=c.localStorage,i=null!=c.sessionStorage,e=function(a){return null==a&&(a="local"),"local"===a&&g?"local":"session"===a&&i?"session":"cookie"},j={local:function(a,b){return c.localStorage.setItem(a,b)},session:function(a,b){return c.sessionStorage.setItem(a,b)},cookie:function(a,b,d){var e,f,g,h;if(b=escape(b),a&&(b=""+a+"="+b),f=d.expire,g=d.path,e=d.domain,h=d.secure,f){switch(f.constructor){case Number:f=1/0===f?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+f;break;case String:f="; expires="+f;break;case Date:f="; expires="+f.toUTCString()}b+=f}return e&&(b+="; domain="+e),g&&(b+="; path="+g),h&&(b+="; secure"),c.document.cookie=b,b}},f={local:function(a){return c.localStorage.getItem(a)},session:function(a){return c.sessionStorage.getItem(a)},cookie:function(a){var b,d,e;return a?(b=new RegExp("(?:^"+a+"|;\\s*"+a+")=(.*?)(?:;|$)","g"),d=b.exec(c.document.cookie),d="undefined"===d[1]?"null":d[1]):d=null!=(e=c.document.cookie.split(";")[0])?e:"null",unescape(d)}},h={local:function(a){return c.localStorage.removeItem(a)},session:function(a){return c.sessionStorage.removeItem(a)},cookie:function(a){return"null"!==f.cookie(a)?j.cookie(a,"",{expire:"Thu, 01 Jan 1970 00:00:00 GMT"}):void 0}},d={local:function(){return c.localStorage.clear()},session:function(){return c.sessionStorage.clear()},cookie:function(){var a,b,d,e,f;for(b=c.document.cookie.split(";"),f=[],d=0,e=b.length;e>d;d++)a=b[d],-1!==a.indexOf("=")?f.push(h.cookie(a.split("=")[0].trim())):h.cookie();return f}},k=function(a,b){return"cookie"===b||a&&"string"==typeof a?!0:void 0},{set:function(c,d,f,g){var h;if(null==g&&(g={}),!k(c,f))return!1;null==d&&(d="null"),"object"==typeof d&&(d=b.toJson(d)),d+="";try{return j[f=e(f)](c,d,g)}catch(i){return h=i,a.$emit("asStorage",{type:"set-error",key:c,service:f,value:d,error:h}),!1}},get:function(c,d){var g,h,i,j;if(!k(c,d))return!1;try{h=f[d=e(d)](c)}catch(l){return g=l,a.$emit("asStorage",{type:"get-error",key:c,service:d,error:g}),!1}return!h||"{"!==(i=h.charAt(0))&&"["!==i||"}"!==(j=h.substr(-1))&&"]"!==j?h:b.fromJson(h)},remove:function(b,c){var d;if(!k(b,c))return!1;try{return h[c=e(c)](b)}catch(f){return d=f,a.$emit("asStorage",{type:"remove-error",key:b,service:c,error:d}),!1}},clear:function(b){var c;try{return d[b=e(b)]()}catch(f){return c=f,a.$emit("asStorage",{type:"clear-error",service:b,error:c}),!1}}}}])}(window);